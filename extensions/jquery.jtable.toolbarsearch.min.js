(function($){var base={_addRowToTableHead:jTable.prototype._addRowToTableHead};$.extend(true,jTable.prototype,{options:{toolbarsearch:false,toolbarreset:true},_addRowToTableHead:function($thead){base._addRowToTableHead.apply(this,arguments);if(this.options.toolbarsearch){var $tr=$("<tr></tr>").appendTo($thead);this._toolbarsearch_addColumnsToHeaderRow($tr)}},_toolbarsearch_addColumnsToHeaderRow:function($tr){var self=this;if(this.options.selecting&&this.options.selectingCheckboxes){$tr.append("<th/>")}for(var i=0;i<this._columnList.length;i++){var fieldName=this._columnList[i];var $headerCell=this._toolbarsearch_createHeaderCellForField(fieldName,this.options.fields[fieldName]);$headerCell.appendTo($tr)}let actions=["deleteAction","cloneAction","updateAction"];let $actioncount=0;actions.forEach(action=>{if(this.options.actions[action]){$actioncount+=1}});let $reset=$("<th></th>").addClass("jtable-toolbarsearch-reset");if($actioncount){$reset.attr("colspan",$actioncount)}if(this.options.toolbarreset){$resetbutton=$('<input type="button" class="jtable-toolbarsearch-reset-button" value="Reset"/>').appendTo($reset);$resetbutton.click(function(){$(".jtable-toolbarsearch").val("");$(".jtable-toolbarsearch-extra").val("");self.load({})});$tr.append($reset)}else if($actioncount){$tr.append($reset)}},_toolbarsearch_createHeaderCellForField:function(fieldName,field){var self=this;if(typeof field.searchable==="undefined"){field.searchable=true}field.width=field.width||"10%";var $input=$('<input id="jtable-toolbarsearch-'+fieldName+'" type="text"/>').addClass("jtable-toolbarsearch").css("width","90%");if(field.type=="date"){if(typeof $.fn.fdatepicker=="function"){let displayFormat=field.displayFormat||this.options.defaultDateFormat;$container=$("<div>");$hiddenInput=$("<input>",{class:"jtable-toolbarsearch-extra",id:"jtable-toolbarsearch-extra-"+fieldName,type:"hidden",name:fieldName});let $visibleInput=$("<input>",{class:"jtable-toolbarsearch",id:"jtable-toolbarsearch-"+fieldName,type:"text",name:"alt-"+fieldName}).css("width","90%");$container.append($hiddenInput,$visibleInput);$visibleInput.fdatepicker({autoClose:true,todayButton:new Date,clearButton:true,closeButton:true,dateFormat:displayFormat,altFieldDateFormat:"Y-m-d",altField:"#jtable-toolbarsearch-extra-"+fieldName});$input=$container}else if(typeof $.fn.datepicker=="function"){var displayFormat=field.displayFormat||this.options.defaultDateFormat;$input.datepicker({dateFormat:displayFormat,changeMonth:true,changeYear:true,yearRange:"-100:+1",numberOfMonths:3,showButtonPanel:true})}else{$input=$('<input id="jtable-toolbarsearch-'+fieldName+'" type="date"/>').addClass("jtable-toolbarsearch").css("width","90%")}}else if(field.type=="checkbox"&&field.values){$input=$('<select class="" id="jtable-toolbarsearch-'+fieldName+'"></select>').addClass("jtable-toolbarsearch").css("width","90%");let options=[...this._createCheckBoxStateArrayForField(fieldName)];if(options.length===0||options[0].Value!==""){options.unshift({Value:"",DisplayText:""})}this._fillDropDownListWithOptions($input,options,"")}else if(field.options){$input=$('<select class="" id="jtable-toolbarsearch-'+fieldName+'"></select>').addClass("jtable-toolbarsearch").css("width","90%");let options=[...this._getOptionsForField(fieldName,{})];if(options.length===0||options[0].Value!==""){options.unshift({Value:"",DisplayText:""})}this._fillDropDownListWithOptions($input,options,"")}$input.on("change",function(){var queries=[];var searchOptions=[];$(".jtable-toolbarsearch").each(function(){var fieldName=$(this).attr("id").replace("jtable-toolbarsearch-","");if($(this).val().trim().length>=1){searchOptions.push(fieldName);queries.push($(this).val())}});$(".jtable-toolbarsearch-extra").each(function(){var fieldName=$(this).attr("id").replace("jtable-toolbarsearch-extra-","");if($(this).val().trim().length>=1){searchOptions.push(fieldName);queries.push($(this).val())}});self.load({"q[]":queries,"opt[]":searchOptions})});var $headerContainerDiv=$("<div />").addClass("jtable-column-header-container");if(field.searchable){$headerContainerDiv.append($input)}var $th=$("<th></th>").addClass("jtable-column-header").css("width",field.width).data("fieldName",fieldName).append($headerContainerDiv);if(field.visibility==="hidden"){$th.hide()}return $th}})})(jQuery);